<%# app/views/screws/show.html.erb %>
<div class="container py-4">
  <div class="mb-3">
    <%= link_to "← Voltar ao catálogo", screws_path, class: "text-decoration-none" %>
  </div>

  <div class="row g-4">
    <div class="col-md-7">
      <% if @screw.images.attached? %>
        <% carousel_id = "screwCarousel-#{@screw.id}" %>
        <div id="<%= carousel_id %>" class="carousel slide">
          <div class="carousel-inner">
            <% @screw.images.each_with_index do |img, i| %>
              <div class="carousel-item <%= 'active' if i == 0 %>">
                <%= image_tag img, class: "d-block w-100 rounded shadow-sm", style: "height: 360px; object-fit: cover;" %>
              </div>
            <% end %>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#<%= carousel_id %>" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Anterior</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#<%= carousel_id %>" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Próximo</span>
          </button>
        </div>
      <% else %>
        <div class="bg-light d-flex align-items-center justify-content-center rounded" style="height: 360px;">
          <span class="text-muted">Sem imagens</span>
        </div>
      <% end %>
    </div>

    <div class="col-md-5">
      <small class="text-muted"><%= @screw.thread %> — <%= @screw.surface_treatment %></small>
      <h3 class="fw-bold mt-1"><%= @screw.description %></h3>
      <p class="mb-1 text-muted"><%= @screw.automaker %> - <%= @screw.model %></p>

      <hr>

      <dl class="row small">
        <% {
          "Rosca" => @screw.thread,
          "Comprimento da rosca" => @screw.thread_length,
          "Classe de resistência" => @screw.resistance_class,
          "Tratamento" => @screw.surface_treatment,
          "Montadora" => @screw.automaker,
          "Modelo" => @screw.model
        }.each do |label, value| %>
          <% next if value.blank? %>
          <dt class="col-6 text-muted"><%= label %></dt>
          <dd class="col-6"><%= value %></dd>
        <% end %>
      </dl>

      <div class="p-3 bg-light rounded d-flex align-items-center justify-content-between my-3">
        <div class="fs-4 fw-bold"><%= format_price(@screw.price) %></div>
        <%= button_to "COMPRAR", "#", class: "btn btn-yellow px-4", method: :post %>
      </div>
    </div>
  </div>
</div>
