<nav class="navbar navbar-expand-lg" style="background-color: $color-owhite;">
  <div class="container-fluid px-5 py-2">
    <a class="navbar-brand fw-bold" style="color: $color-otitle;" href="#">TR AutoParts</a>

    <div class="collapse navbar-collapse justify-content-center">
      <ul class="navbar-nav mb-2 mb-lg-0 gap-3">
        <li class="nav-item"><%= link_to "InÃ­cio", root_path, class: "nav-link" %></li>
        <li class="nav-item"><%= link_to "Produtos", screws_path, class: "nav-link" %></li>
        <li class="nav-item"><a class="nav-link" href="#">Sobre NÃ³s</a></li>
        <li class="nav-item"><a class="nav-link" href="#">FAQ</a></li>
        <%# // Show Admin link only in development %>
        <% if Rails.env.development? %>
          <li class="nav-item ms-2">
            <%= link_to "Admin", admin_root_path, class: "nav-link" %>
          </li>
        <% end %>
      </ul>
    </div>

    <div class="d-flex align-items-center gap-3">
      <%# // Cart link (kept as-is) %>
      <%= link_to cart_path, class: "nav-link d-flex align-items-center gap-1" do %>
        <span class="me-1">ðŸ›’</span>
        <span>Carrinho</span>
        <% if cart_count.to_i > 0 %>
          <span class="badge bg-warning text-dark ms-1"><%= cart_count %></span>
        <% end %>
      <% end %>

      <%# // If signed in: show "Meus pedidos" + user menu %>
      <% if defined?(user_signed_in?) && user_signed_in? %>
        <%= link_to "Meus pedidos", my_orders_path, class: "nav-link" %>

        <%# // Simple user dropdown (email shown). You can swap for name later. %>
        <div class="dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <%= current_user.email %>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><%= link_to "Meus pedidos", my_orders_path, class: "dropdown-item" %></li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <%= link_to "Sair", destroy_user_session_path, data: { turbo_method: :delete }, class: "dropdown-item" %>
              <%# // Using Turbo-friendly method for Devise sign out %>
            </li>
          </ul>
        </div>

      <% else %>
        <%# // If not signed in: show Devise links %>
        <%= link_to "Entrar", new_user_session_path, class: "text-dark nav-link" %>
        <%= link_to "Cadastrar", new_user_registration_path,
                    class: "btn text-white rounded-pill px-3",
                    style: "background-color: $color-secondary;" %>
      <% end %>
    </div>
  </div>
</nav>
