<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h4 mb-0">Produto</h1>

    <%# // Ações rápidas %>
    <div class="d-flex gap-2">
      <%= link_to "Voltar", admin_screws_path, class: "btn btn-outline-secondary" %>
      <%= link_to "Editar", edit_admin_screw_path(@screw), class: "btn btn-primary" %>
      <%= button_to "Excluir", admin_screw_path(@screw),
            method: :delete,
            form: { data: { turbo_confirm: "Tem certeza? Esta ação não pode ser desfeita." } },
            class: "btn btn-outline-danger" %>
    </div>
  </div>

  <div class="row g-4">
    <%# -- Coluna esquerda: imagens ------------------------------------- %>
    <div class="col-md-5">
      <div class="card shadow-sm">
        <div class="card-body">
          <h6 class="mb-3">Imagens</h6>

          <% if @screw.images.attached? %>
            <div class="d-flex flex-wrap gap-2">
              <% @screw.images.each do |img| %>
                <div class="border rounded p-1 bg-white" style="width: 140px;">
                  <%= image_tag img.variant(resize_to_limit: [320, 320]),
                                class: "img-fluid",
                                alt: @screw.description %>
                </div>
              <% end %>
            </div>
          <% else %>
            <div class="text-muted small">Sem imagens.</div>
          <% end %>

          <div class="mt-3">
            <%= link_to "Gerenciar imagens", edit_admin_screw_path(@screw), class: "btn btn-sm btn-outline-primary" %>
          </div>
        </div>
      </div>
    </div>

    <%# -- Coluna direita: dados ----------------------------------------- %>
    <div class="col-md-7">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="mb-1"><%= @screw.description %></h5>
          <div class="mb-3">
            <%# // Mostra status de estoque %>
            <% if @screw.in_stock? %>
              <span class="badge bg-success">Em estoque: <%= @screw.stock %></span>
            <% else %>
              <span class="badge bg-secondary">Sem estoque</span>
            <% end %>
          </div>

          <dl class="row mb-0">
            <dt class="col-sm-4 text-muted">Preço</dt>
            <dd class="col-sm-8"><strong><%= format_price(@screw.price) %></strong></dd>

            <dt class="col-sm-4 text-muted">Rosca</dt>
            <dd class="col-sm-8"><%= @screw.thread.presence || "-" %></dd>

            <dt class="col-sm-4 text-muted">Comprimento da rosca</dt>
            <dd class="col-sm-8"><%= @screw.thread_length.presence || "-" %></dd>

            <dt class="col-sm-4 text-muted">Classe de resistência</dt>
            <dd class="col-sm-8"><%= @screw.resistance_class.presence || "-" %></dd>

            <dt class="col-sm-4 text-muted">Tratamento</dt>
            <dd class="col-sm-8"><%= @screw.surface_treatment.presence || "-" %></dd>

            <dt class="col-sm-4 text-muted">Montadora</dt>
            <dd class="col-sm-8"><%= @screw.automaker.presence || "-" %></dd>

            <dt class="col-sm-4 text-muted">Modelo</dt>
            <dd class="col-sm-8"><%= @screw.model.presence || "-" %></dd>

            <dt class="col-sm-4 text-muted">Slug (URL)</dt>
            <dd class="col-sm-8"><code><%= @screw.slug.presence || "(a gerar)" %></code></dd>

            <dt class="col-sm-4 text-muted">Criado em</dt>
            <dd class="col-sm-8"><%= l(@screw.created_at, format: :short) %></dd>

            <dt class="col-sm-4 text-muted">Atualizado em</dt>
            <dd class="col-sm-8"><%= l(@screw.updated_at, format: :short) %></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>
